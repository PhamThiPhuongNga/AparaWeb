{% extends "pages/base.html" %}
{% load static %}

{% block title %}Trang chủ{% endblock %}

{% block banner %}
<header id="header-center-slogan-form-2" class="pt-200 pb-200 text-center dark">
   
    <div class="container">
        <div class="row">
            <div class="col-md-12" style="">
                {% comment %} <img class="screen mb-100" src="{% static 'images/Apara_den.png' %}" alt="logo" width="170" height="170"> {% endcomment %}
                <h1 data-aos="zoom-in" data-aos-duration="2000" >Apara</h1>
                <h2 class="mb-50 " data-aos="fade-up" data-aos-duration="2000" style="">Rent a paradise on the weekend</h2>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
                    <script id="dataJson" type="application/json" src="C:/xampp/htdocs/AparaWeb/home/static/data.json"></script>
                    <form  class="form-inline" action="{% url 'searchlocation'%}">
                        <div class="form-group" style="position: relative;">
                            <input onclick="handleItem"class="form-control autocomplete-input" id="name-input" name="name" type="search" placeholder="Tên địa điểm..." aria-label="Search">
                            <ul class="autocomplete-list " id="name-id">
                            </ul>
                        </div>
                        <div class="form-group select-group">
                            <select class="form-control form-select-sm" name="city" id="city" aria-label=".form-select-sm">
                                <option value="" selected="" disabled="">Chọn tỉnh thành</option>
                            </select>
                        </div>
                        <div class="form-group select-group" >
                            <select class="form-control" name="qdistrict" id="district" aria-label=".form-select-sm">
                                <option value="" selected="" disabled="">Chọn Quận/Huyện</option>
                            </select>
                        </div>
                        <div class="form-group select-group">
                            <select class="form-control" name="qward" id="ward" aria-label=".form-select-sm">
                                <option value="wardcommune" selected="" disabled="">Chọn Phường/Xã</option>
                            </select>
                        </div>
                        
                        <div class="form-group select-group">
                            <select class="form-control" name="qcost" id="qcost" onChange>
                                <option value="mincost" selected="" disabled=""  >Giá từ</option>
                                <option value="100000">Từ 0 -> 100000</option>
                                <option value="150000">Từ 0 -> 150000</option>
                                <option value="200000">Từ 0 -> 200000</option>
                                <option value="250000">Từ 0 -> 250000</option> 
                                <option value="300000">Từ 0 -> 300000</option> 
                            </select>
                        </div>
                        <button class="btn btn-primary my-2 my-sm-0 " type="submit">Tìm kiếm</button>
                    </form>
                <p class="animate__animated animate__fadeInRight "  data-aos="fade-left" data-aos-duration="2000">Bạn rất quan trọng với chúng tôi, mọi thông tin nhận được sẽ luôn được bảo mật.</p>
            </div>
        </div>
    </div>
    <div class="bg"><img src="{% static 'images/bg-nature-4.jpg' %}"></div>
</header>
{% endblock %}

{% block content %}
<section id="clients-carousel" class="pt-75 pb-50  light">
    <div class="container">
        <div class="row">
            <div class="col-sm-6">
                <h3 class="mb-40 text-center" data-aos="fade-right" data-aos-duration="2000">Về chúng tôi</h3>
                <p class=""  data-aos="fade-up"data-aos-duration="2000">
                    <b>Apara</b> giúp kết nối các giá trị văn hóa với hoạt động kinh doanh của các doanh nghiệp để tạo
                        ra chuỗi giá trị mang thương hiệu Apara trong nỗ lực quảng bá rộng rãi các địa điểm vui chơi giải trí hình ảnh du lịch Việt Nam đến chính những con người Việt Nam
                        . Giúp khách hàng cùng với Apara tìm kiếm được địa điểm đi chơi, hẹn hò phù hợp với nhu cầu giải trí của họ
                        .Đó là động lực thúc đẩy hướng đi thống nhất của tập thể Apara, với mục 
                        tiêu doanh nghiệp luôn đồng hành cùng xã hội, cộng đồng để phát triển kinh tế và các giá trị tinh
                        thần, nhân văn.</p>                
                    {% comment %} <a class="btn btn-danger d-none d-md-inline-block mt-4" href="/ve-chung-toi/co-cau-to-chuc" >XEM THÊM</a> {% endcomment %}
                </p>
            </div>
            <div class="col-sm-6">
               <img src="/media/images/aboutus.png" width="100%" height="100%">
            </div>
        </div>
    </div>
    <div class="bg"></div> 
</section>
{% if locationData%}
<section id="clients-carousel" class="pt-75 pb-50  light">
    <div class="container">
        <h3 class="mb-40 text-center" data-aos="fade-right" data-aos-duration="2000">Gợi ý hôm nay</h3>
        <div class="carousel-5item-nav owl-drag"  data-aos="fade-up"data-aos-duration="2000">
            {% for itemmmm in locationData%}
            <div class="">
                <div class="card" style="border: 0.5px solid #f2f2f2;">
                    <div class="zoom">
                        <img src="{{itemmmm.image.url}}" alt="Photo" class="card-img">
                    </div>
                    <div style="margin: 10px;">
                        <h4 class="mt-20 mb-0" style="display: -webkit-box;-webkit-line-clamp: 1;-webkit-box-orient: vertical;overflow: hidden;"><strong><a href="/blog/location/{{itemmmm.id}}">{{itemmmm.name}}</a></strong></h4>
                        <h5 class="mb-20">{{itemmmm.category}}</h5>
                        <p class="mb-20 address-loca" style="display: -webkit-box;-webkit-line-clamp: 2;-webkit-box-orient: vertical;overflow: hidden;">
                            <i class="icon-location2 icon-color icon-size-m icon-position-left "></i>{{itemmmm.address}}, {{itemmmm.wardcommune}}, {{itemmmm.district}}, {{itemmmm.city}}</p>
                        <ul class="text-icon-list text-icon-list-sep">
                            <li class="clearfix"><i class="icon-clock icon-color icon-size-m icon-position-left"></i>
                                <span>Giờ</span>
                                <span class="pull-right">{{itemmmm.timestart}}~{{itemmmm.timeend}}</span>
                            </li>
                            <li class="clearfix"><i class="icon-star-fill icon-color icon-size-m icon-position-left" style=" color: #ffb503 !important;
                                border-color: #ffb503 !important;"></i>
                                <span>Đánh giá</span>
                                <span class="pull-right">{{itemmmm.averageReview}}/ 5</span>
                            </li>
                            <li class="clearfix"><i class="icon-tag icon-color icon-size-m icon-position-left"></i>
                                <span>Giá</span>
                                <span class="pull-right"><strong>{{itemmmm.costmin}}</strong>-<strong>{{itemmmm.costmax}} VND</strong></span>
                            </li>
                        </ul>
                        <button type="submit" id="" class="btn btn-primary mt-3" style="width:100%;"><a href="/blog/location/{{itemmmm.id}}"style="color:#ffffff;">Xem thêm</a ></button>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <div class="bg"></div> 
</section>
<section id="clients-carousel" class="pt-50 pb-50 light">
    <div class="container">
        <h3 class="mb-40 text-center" data-aos="fade-right" data-aos-duration="2000" >Địa điểm phổ biến</h3>
        <div class="carousel-5item-nav owl-drag mt-30" data-aos="fade-up"data-aos-duration="2000">
            {% for location in locations %}
                <div class="">
                    <div class="card" style="border: 0.5px solid #f2f2f2;">
                        <div class="zoom">
                            <img src="{{location.image.url}}" alt="Photo" class="card-img">
                        </div>
                        <div style="margin: 10px;">
                            <h4 class="mt-20 mb-0" style="display: -webkit-box;-webkit-line-clamp: 1;-webkit-box-orient: vertical;overflow: hidden;"><strong><a href="/blog/location/{{location.id}}">{{location.name}}</a></strong></h4>
                            <h5 class="mb-20">{{location.category}}</h5>
                            <p class="mb-20 address-loca" style="display: -webkit-box;-webkit-line-clamp: 2;-webkit-box-orient: vertical;overflow: hidden;">
                                <i class="icon-location2 icon-color icon-size-m icon-position-left "></i>{{location.address}}, {{location.wardcommune}}, {{location.district}}, {{location.city}}</p>
                            <ul class="text-icon-list text-icon-list-sep">
                                
                                <li class="clearfix"><i class="icon-star-fill icon-color icon-size-m icon-position-left" style=" color: #ffb503 !important;
                                    border-color: #ffb503 !important;"></i>
                                    <span>Đánh giá</span>
                                    <span class="pull-right">{{location.averageReview}}/ 5</span>
                                </li>
                                <li class="clearfix"><i class="icon-clock icon-color icon-size-m icon-position-left"></i>
                                    <span>Giờ</span>
                                    <span class="pull-right">{{location.timestart}}~{{location.timeend}}</span>
                                </li>
                                <li class="clearfix"><i class="icon-tag icon-color icon-size-m icon-position-left"></i>
                                    <span>Giá</span>
                                    <span class="pull-right"><strong>{{location.costmin}}</strong>-<strong>{{location.costmax}} VND</strong></span>
                                </li>
                                <li class="clearfix"><i class="icon-file-preview icon-color icon-size-m icon-position-left"></i>
                                    <span>Lượt truy cập</span>
                                    <span class="pull-right">{{location.views}}</span>
                                </li>
                            </ul>
                            <button type="submit" id="" class="btn btn-primary mt-3" style="width:100%;"><a href="/blog/location/{{location.id }}"style="color:#ffffff;">Xem thêm</a ></button>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    <div class="bg"></div>
</section>
{% else %}
<section id="clients-carousel" class="pt-50 pb-50 light">
    <div class="container">
        <h3 class="mb-40 text-center" data-aos="fade-right" data-aos-duration="2000">Địa điểm phổ biến</h3>
        <div class="carousel-5item-nav owl-drag mt-30" data-aos="fade-up"data-aos-duration="2000">
            {% for location in locations %}
                <div class="">
                    <div class="card" style="border: 0.5px solid #f2f2f2;">
                        <div class="zoom">
                            <img src="{{location.image.url}}" alt="Photo" class="card-img">
                        </div>
                        <div style="margin: 10px;">
                            <h4 class="mt-20 mb-0" style="display: -webkit-box;-webkit-line-clamp: 1;-webkit-box-orient: vertical;overflow: hidden;"><strong><a href="/blog/location/{{location.id}}">{{location.name}}</a></strong></h4>
                            <h5 class="mb-20">{{location.category}}</h5>
                            <p class="mb-20 address-loca" style="display: -webkit-box;-webkit-line-clamp: 2;-webkit-box-orient: vertical;overflow: hidden;">
                                <i class="icon-location2 icon-color icon-size-m icon-position-left "></i>{{location.address}}, {{location.wardcommune}}, {{location.district}}, {{location.city}}</p>
                            <ul class="text-icon-list text-icon-list-sep">
                                
                                <li class="clearfix"><i class="icon-star-fill icon-color icon-size-m icon-position-left" style=" color: #ffb503 !important;
                                    border-color: #ffb503 !important;"></i>
                                    <span>Đánh giá</span>
                                    <span class="pull-right">{{location.averageReview}}/ 5</span>
                                </li>
                                <li class="clearfix"><i class="icon-clock icon-color icon-size-m icon-position-left"></i>
                                    <span>Giờ </span>
                                    <span class="pull-right">{{location.timestart}}~{{location.timeend}}</span>
                                </li>
                                <li class="clearfix"><i class="icon-tag icon-color icon-size-m icon-position-left"></i>
                                    <span>Giá</span>
                                    <span class="pull-right"><strong>{{location.costmin}}</strong>-<strong>{{location.costmax}} VND</strong></span>
                                </li>
                                <li class="clearfix"><i class="icon-file-preview icon-color icon-size-m icon-position-left"></i>
                                    <span>Lượt truy cập</span>
                                    <span class="pull-right">{{location.views}}</span>
                                </li>
                            </ul>
                            <button type="submit" id="" class="btn btn-primary mt-3" style="width:100%;"><a href="/blog/location/{{location.id }}"style="color:#ffffff;">Xem thêm</a ></button>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    <div class="bg"></div>
</section>
{% endif %}

<section id="clients-carousel " class="pt-50 pb-50 light">
    <div class="container">
        <h3 class="mb-40 text-center"data-aos="fade-right" data-aos-duration="2000">Địa điểm mới nhất</h3>
        <div class="carousel-5item-nav owl-drag mt-30" data-aos="fade-up"data-aos-duration="2000">
            {% for location in locationnew %}
                <div class="">
                    <div class="card" style="border: 0.5px solid #f2f2f2;">
                        <div class="zoom">
                            <img src="{{location.image.url}}" alt="Photo" class="card-img">
                        </div>
                        <div style="margin: 10px;">
                            <h4 class="mt-20 mb-0" style="display: -webkit-box;-webkit-line-clamp: 1;-webkit-box-orient: vertical;overflow: hidden;"><strong><a href="/blog/location/{{location.id}}">{{location.name}}</a></strong></h4>
                            <h5 class="mb-20">{{location.category}}</h5>
                            <p class="mb-20 address-loca" style="display: -webkit-box;-webkit-line-clamp: 2;-webkit-box-orient: vertical;overflow: hidden;">
                                <i class="icon-location2 icon-color icon-size-m icon-position-left "></i>{{location.address}}, {{location.wardcommune}}, {{location.district}}, {{location.city}}</p>
                            <ul class="text-icon-list text-icon-list-sep">
                                
                                <li class="clearfix"><i class="icon-star-fill icon-color icon-size-m icon-position-left" style=" color: #ffb503 !important;
                                    border-color: #ffb503 !important;"></i>
                                    <span>Đánh giá</span>
                                    <span class="pull-right">{{location.averageReview}}/ 5</span>
                                </li>
                                <li class="clearfix"><i class="icon-clock icon-color icon-size-m icon-position-left"></i>
                                    <span>Giờ </span>
                                    <span class="pull-right">{{location.timestart}}~{{location.timeend}}</span>
                                </li>
                                <li class="clearfix"><i class="icon-tag icon-color icon-size-m icon-position-left"></i>
                                    <span>Giá</span>
                                    <span class="pull-right"><strong>{{location.costmin}}</strong>-<strong>{{location.costmax}} VND</strong></span>
                                </li>
                            </ul>
                            <button type="submit" id="" class="btn btn-primary mt-3" style="width:100%;"><a href="/blog/location/{{location.id }}"style="color:#ffffff;">Xem thêm</a ></button>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    <div class="bg"></div>
</section>
<section id="clients-carousel" class="pt-50 pb-50 text-center light">
    <div class="container">
        <h3 class="text-center" data-aos="fade-right" data-aos-duration="2000">Danh mục</h3>
        <div class="carousel-5item-nav owl-drag mt-30" data-aos="fade-up"data-aos-duration="2000">
            {% for category in category %}
            <div class="item border-box" >
                <p class="pt-30 pb-30" style="margin-bottom: 0px"><a href="{% url 'get_location_category' category.id%}">{{category.name}}</a></p>
            </div>
            {% endfor %}
        </div>
    </div>
    <div class="bg"></div>
</section>
<section id="clients-carousel" class="pt-50 pb-50 text-center light">
    <div class="container">
        <h3 class="text-center"data-aos="fade-right" data-aos-duration="2000">Đối tác</h3>
        <div class="carousel-5item-nav owl-drag " data-aos="fade-up"data-aos-duration="2000">
            {% for location in locations %}
            <div class="item">
                <img src="media/{{location.logo}}" alt="logo" class="screen" style="width: 100px;object-fit: contain;height: 250px;">
                {% comment %} <p class="mt-20">{{category.name}}</p> {% endcomment %}
            </div>
            {% endfor %}
        </div>
    </div>
    <div class="bg"></div>
</section>
<style>
    .card img{
        height: 200px!important;
    }
    .autocomplete-input{
        position: ralative;
        outline: none;
    }
    .autocomplete-list{
        position: absolute;
        top: 50px;
        left: 0;
        list-style-type:none; 
        margin:0; 
        padding: 0; 
        width:100%; 
        max-height: 200px; 
        background-color: #ffffff;  
        overflow-y: auto;
    }
    .autocomplete-list li{
        float: left; 
        padding: 10px;
        width: calc(100%);
        cursor: pointer;
    }
    .autocomplete-list li a{
        color: black!important;
    }
    .autocomplete-list li:hover{
        background-color: #EEEEEE;
    }
</style>
<script type="text/javascript">
    const url = window.location.href;
    {% comment %} function handleItem(){
        {% comment %} $("#name-input").html('') {% endcomment %}
        {% comment %} $('#name-id').html('') 
        document.getElementById('name-id').style.display = "none";
    } {% endcomment %}
    $("#name-input").keyup(function() {
        const value = $("#name-input").val();
        $.post(`${url}search`,{'valueSearch':value,'csrfmiddlewaretoken': '{{ csrf_token }}'},function(data){
            let dataInsert = ``;
            data?.data?.map(item => {
                dataInsert = `${dataInsert}<li value='${item.id}'"><a href='${url}/blog/location/${item.id}/'>${item.name}</a></li>`
            })
            $('#name-id').html(dataInsert)
        }) 
    });
    $("#name-input").mousedown(function() {
        $("#name-id").html('')
    });
</script>
 {% endblock %}
 